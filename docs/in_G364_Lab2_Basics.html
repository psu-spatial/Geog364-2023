<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Lab 2: Playing with data</title>

<script src="site_libs/header-attrs-2.22/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>
<script src="site_libs/kePrint-0.0.1/kePrint.js"></script>
<link href="site_libs/lightable-0.0.1/lightable.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>







<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">GEOG 364 Lab Book</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="in_Tutorial01WhatisR.html">1. What is R?</a>
    </li>
    <li>
      <a href="in_Tutorial02SetUp.html">2. General Set-Up</a>
    </li>
    <li>
      <a href="in_Tutorial03LabSetUp.html">3. Lab Set-Up</a>
    </li>
    <li>
      <a href="in_Tutorial04ConsoleBasics.html">4. Console Basics</a>
    </li>
    <li>
      <a href="in_Tutorial05ReadingInData.html">5. Reading in Data</a>
    </li>
    <li>
      <a href="in_Tutorial06DataWrangling.html">6. Data wrangling</a>
    </li>
    <li>
      <a href="in_Tutorial07DataSummaries.html">7. Data summaries</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Labs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="in_G364_Lab0_FAQ.html">Lab FAQ</a>
    </li>
    <li>
      <a href="in_G364_Lab1_2324.html">Lab 1</a>
    </li>
    <li>
      <a href="in_G364_Lab2_Basics.html">Lab 2</a>
    </li>
    <li>
      <a href="in_G364_Lab3_PointPattern.html">Lab 3A</a>
    </li>
    <li>
      <a href="in_G364_Lab3B_PointPatternDist.html">Lab 3B</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Project instructions
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="in_G364_Project2.html">Project 2</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Lab 2: Playing with data</h1>
<h3 class="subtitle"><h4 style="font-style:normal"><br />
This is a two week lab. If you are new to R, I suggest doing the
data-camp, set-up and frost analysis this week, then next week starting
the UFO analysis.<br />
</h4></h3>

</div>


<style>
p.comment {
background-color: #DBDBDB;
padding: 10px;
border: 1px solid black;
margin-left: 0px;
border-radius: 5px;
font-style: normal;
}

h1.title {
  font-weight: bold;
  font-family: Arial;  
}

h2.title {
  font-family: Arial;  
}

</style>
<style type="text/css">
#TOC {
  font-size: 12px;
  font-family: Arial;
}

pre code {
  font-size: 13px; /* Adjust the font size as needed */
  white-space: pre-wrap;
}
</style>
<p><br />
</p>
<p>ANNOUNCEMENT: If you knit twice you might get an error like this.
Don’t panic, see canvas announcements and talk to Harman. (essentially
you need to clear your cache, or change any plot_mode(“view”) to
plot_mode(“plot”)</p>
<p><img src="Figures/Lab2_Fig5_TmapCacheError.png" width="810" /></p>
<p>The aim of this lab is to start some spatial data analysis and to
recap what you learned in Lab 1. By the end of this lab you will be able
to:</p>
<ul>
<li><p>Prove to me you can set up the labs</p></li>
<li><p>Read in data from an excel file and a spatial file</p></li>
<li><p>Conduct exploratory data analysis</p></li>
<li><p>Wrangle a table of data</p></li>
<li><p>Make initial plots and maps for two case studies <br></p></li>
</ul>
<p>See <a
href="https://psu.instructure.com/courses/2260204/assignments/15480985">The
Canvas page here</a>, or go to canvas for assignment guidelines. You can
use either the website base RStudio/Posit Cloud OR R-Desktop for this
lab</p>
<p><br><br><br></p>
<div id="data-camp" class="section level1">
<h1>Data Camp</h1>
<p>IMPORTANT, Click this link to be added (for free) to the class
datacamp. You will need to have signed up using your PSU address</p>
<ul>
<li><a
href="https://www.datacamp.com/groups/shared_links/09c662a03e00d0ac23e6716894266ef2f72c4cee048f1b1da99c0f9440584976"
class="uri">https://www.datacamp.com/groups/shared_links/09c662a03e00d0ac23e6716894266ef2f72c4cee048f1b1da99c0f9440584976</a>
<br><br></li>
</ul>
<div id="optional-but-recommended" class="section level3">
<h3>Optional but recommended</h3>
<p>If you felt lost during week 1, I highly recommend completing chapter
1 of this data camp course. It will help you understand the next bit of
the analysis. It’s free if you signed up using the link above.</p>
<ul>
<li><a
href="https://app.datacamp.com/learn/courses/free-introduction-to-r"
class="uri">https://app.datacamp.com/learn/courses/free-introduction-to-r</a></li>
</ul>
<p>I will award 5 participation points for anyone who completes chapter
1.</p>
<p><br><br><br></p>
</div>
</div>
<div id="getting-started" class="section level1">
<h1>Getting started</h1>
<div id="create-your-project" class="section level2">
<h2>2. Create your project</h2>
<ol style="list-style-type: decimal">
<li><p><strong>Create a new project in R for Lab 2 and make sure it’s in
your GEOG 364 folder.</strong></p>
<ul>
<li><p>For R-Desktop, see <a
href="https://psu-spatial.github.io/Geog364-2023/in_Tutorial03LabSetUp.html#Projects_using_Desktop">Tutorial
3B</a></p></li>
<li><p>For Posit Cloud, see <a
href="https://psu-spatial.github.io/Geog364-2023/in_Tutorial03LabSetUp.html#Projects_using_Rstudioposit_Cloud">Tutorial
3C</a> <br><br></p></li>
</ul></li>
<li><p>Take a screenshot of R studio screen that <em>proves</em> you
have set up your project correctly</p>
<ul>
<li>Hint, <a
href="https://psu-spatial.github.io/Geog364-2023/in_Tutorial03LabSetUp.html#How_to_check_you_are_in_a_project">how
to check you are in a project</a>) <br><br> To take a screenshot on a
mac: <em>Press <strong><code>Shift + Command (⌘) + 4</code></strong>.
Your cursor will change to a crosshair. Click and drag to select the
portion of the screen you want to capture. Release the mouse button to
take the screenshot. It will be saved to your desktop. Re-name the file
and move to your GEOG-364 Lab 2 folder.</em> <br><br> To take a
screenshot on a windows machine, try one of these or ask around/Harman:
<em>Press *<strong><code>Windows key + Shift + S</code></strong> . This
is the <a
href="https://support.microsoft.com/en-us/windows/use-snipping-tool-to-capture-screenshots-00246869-1843-655f-f220-97299b865f6b">snipping
tool</a>.</em> <em>On older machines, try
<strong><code>Windows Logo Key + PrtScn.</code></strong></em>
<em>Re-name the file and move to your GEOG-364 Lab 2 folder.</em></li>
</ul></li>
</ol>
<p><br></p>
</div>
<div id="get-the-files" class="section level2">
<h2>3. Get the files</h2>
<p><u>Download these three files from <a
href="https://psu.instructure.com/courses/2260204/assignments/15480985">Canvas</a>
and place them in your lab 2 folder.</u> <br><br />
If you are on the cloud, <a
href="https://psu-spatial.github.io/Geog364-2023/in_Tutorial03LabSetUp.html#Uploading_files">here
is how to upload files</a>:</p>
<ul>
<li><p>The lab template</p></li>
<li><p>The frost data</p></li>
<li><p>Your PERSONAL UFO dataset <br><br />
(<em>f this doesn’t work or you can’t find your file, there’s no panic.
Let Harman know - we will get it fixed by the end of the
day</em></p></li>
</ul>
<p><br></p>
</div>
<div id="edit-your-template" class="section level2">
<h2>4. Edit your template</h2>
<p>Rather than create a new markdown file, this week I want you to use a
template that I made. You should have just downloaded this from Canvas.
Make sure it’s in your Lab 2 folder and you’re running your project.
<br></p>
<ol style="list-style-type: decimal">
<li><p>Go to the file quadrant and click the G364_Lab 2 Template.Rmd
file.<br><br></p></li>
<li><p>You will hopefully see a little yellow bar asking you to install
some libraries/package. Say yes. Alternatively, use the <a
href="https://psu-spatial.github.io/Geog364-2023/in_Tutorial03LabSetUp.html#Downloading_a_new_package">install
package command</a> you used last week to install the sp, sf, tmap,
tidyverse and readxl packages.</p></li>
<li><p>Click “<a
href="https://psu-spatial.github.io/Geog364-2023/in_Tutorial03LabSetUp.html#Visual_mode">visual</a>”
mode. Your screen should now look like the screenshot below. If not, ask
for help<br><br></p></li>
<li><p>Click knit. You might have to re-save. Make sure to include your
ID in the filename. You should see the html appear. <br><br></p></li>
<li><p>Go back to R studio.</p>
<ul>
<li>In the Set-Up section, explain to me what an R project is in the
text and include your screenshot, explaining how it proves you are
running your Lab 2 project.</li>
<li>Hint, to include a picture, click the visual mode picture button
(see circle in pic above).<br><br></li>
</ul></li>
</ol>
<p><img src="Figures/Lab2Fig1_SetUp.png" width="1680" /></p>
<p><br><br></p>
</div>
<div id="libraries" class="section level2">
<h2>5. Libraries</h2>
<p>Last week we downloaded the rmdformats package. In the section above,
hopefully you just downloaded several more (step 3). This is like going
to the app store to get a new banking app.</p>
<p>Even though they are downloaded, we need to load them EVERY TIME we
want to use them (in the way you click on an app on your phone before
you can use it). This is what that library code-chunk does at the start
of the script.</p>
<ul>
<li><p>Press the green arrow on the right of the code chunk to run the
code inside it.&lt;br&gt;You will see a load of “welcome text” telling
your details about the packages you just loaded.&lt;br&gt;Press the
green arrow AGAIN. The text should disappear unless there is an error.
If you get errors, you might <a
href="https://psu-spatial.github.io/Geog364-2023/in_Tutorial03LabSetUp.html#Downloading_a_new_package">still
need to download those packages</a>.</p></li>
<li><p>&lt;br&gt;YOU NEED TO RE-RUN THIS CODE CHUNK EVERY TIME YOU OPEN
R.</p></li>
</ul>
<p><img src="Figures/Lab2Fig2_Libraries.png" width="662" /></p>
<p><br><br><br></p>
</div>
</div>
<div id="frost-analysis" class="section level1">
<h1>Frost Analysis</h1>
<p>Finally some analysis! We are going to conduct some exploratory data
analysis on average last spring frost dates across the South East
USA.</p>
<p>To to this, we are going to follow these steps:</p>
<ul>
<li>Investigate the topic before touching the data</li>
<li>Read the excel file containing the data into R</li>
<li>Calculate summary statistics and “wrangle” the data</li>
<li>Make some initial plots &amp; maps</li>
</ul>
<p><br></p>
<div id="exploratory-investigations" class="section level2">
<h2>6: Exploratory Investigations</h2>
<p><em>Before we touch any data, it’s important to start with words. We
need to summarise what we already know about the dataset, the population
under study and any important context.</em></p>
<p>The aim of this lab is to analyse the “average last frost dates”
obtained from weather stations across the South Eastern USA. E.g. what
day of year, <em>on average</em>, is the final day to get frost. We are
using data obtained from this dissertation to assess the spatial
distribution of average spring frost dates: <em>Parnell, 2005, “A
Climatology of Frost Extremes Across the Southeast United States,
1950–2009”:</em><br> <a
href="https://www.proquest.com/openview/d5a7301f0cbe941ead48c96888f791b8/1?pq-origsite=gscholar&amp;cbl=18750&amp;diss=y"
class="uri">https://www.proquest.com/openview/d5a7301f0cbe941ead48c96888f791b8/1?pq-origsite=gscholar&amp;cbl=18750&amp;diss=y</a></p>
<ul>
<li><p>Read the abstract of the study above to understand the dataset
<em>(click the link and skim read pages iv and v, e.g. the bit before
the table of contents)</em>.</p></li>
<li><p>Write a few sentences in the appropriate section of your lab
report to explain what we are doing.</p></li>
</ul>
<p><br><br></p>
</div>
<div id="load-the-data" class="section level2">
<h2>7: Load the data</h2>
<p>I have already provided the command to load the data into R. Press
the green arrow to run.</p>
<p><img src="Figures/Lab2Fig2a_readindata.png" width="624" /></p>
<p>This loads the data stored in “DataG364_frostday.xlsx” into R, then
temporarily saves the data into a table called ‘frost’. That’s what the
‘arrow’ is doing in the command. It does the stuff on the right (loads
the file from excel, then the arrow means ‘store this as’ frost)</p>
<p>This code will only work if - you have run your library code chunk
and if you have downloaded the readxl library - if your file really is
in your lab 2 folder - If you are running your project</p>
<p>Otherwise you will see an error saying it can’t find the command.</p>
<p>You should see the frost data appear in the ‘environment tab’. Click
the NAME to take a look (see screenshot below). Each row represents a
weather station.</p>
<p><br></p>
<p><img src="Figures/Lab2Fig3_frost.png" width="1149" /></p>
<p><br></p>
<p>You will see a spreadsheet/table/data.frame with these columns:</p>
<ul>
<li><em>Station</em>: The name of the weather station</li>
<li><em>State</em>: The US State that the station resides in</li>
<li><em>Type_Fake</em>: A synthetic column I added to put in a “type” of
station</li>
<li><em>Latitude</em>: The latitude of the station (degrees)</li>
<li><em>Longitude</em>: The longitude of the station (degrees)</li>
<li><em>Elevation</em>: The elevation of the station (m)</li>
<li><em>Dist_to_Coast</em>: The distance from the station to the coast
(km)</li>
<li><em>Avg_DOY_SpringFrost</em>: The Day-Of-Year of the average final
spring frost date for that station</li>
</ul>
<p>When I say Day-Of-Year, I mean a number from 1-365 representing the
month/day of the year e.g. Jan-1:1, Jan-2:2… Jan-31:31, Feb-1:32…
Dec-31:365. We use this number instead of the month/day because its
easier to analyse.</p>
<p>NOTE - Dr G got the original units wrong. She thought that the
distances were in ft/inches, not metric. They have been corrected here.
If you used the feet/inches you will not be penalised.</p>
<p><br><br></p>
</div>
<div id="intro-analysis" class="section level2">
<h2>8: Intro analysis</h2>
<p>This is great, but the joy of R is that it is easy to do more complex
things. Click back to your lab script.Before we were applying commands
to a single word or number e.g. (cos(30)). Now, we can apply commands to
a whole column of data. E.g.</p>
<p><code>mean(frost$Elevation)</code></p>
<p>tells the computer to apply the mean command to the Elevation column
inside the frost table. (the $ means “column” and when you type it, it
will bring up a list to choose from).</p>
<p>For each question below, leave a few blank white lines (or R can get
confused) and make a new code chunk for each piece of code.</p>
<p>WRITE YOUR CONCLUSIONS UNDER EACH CODE CHUNK IN A FULL SENTENCE WITH
UNITS!</p>
<ol style="list-style-type: decimal">
<li><p>Calculate the mean of the Dist_To_Coast column. e.g.
<code>mean(frost$Dist_To_Coast)</code></p></li>
<li><p>Use the <code>max</code> command to find the maximum Elevation in
the dataset.</p></li>
<li><p>Google the command for the standard deviation in R. Find the
standard deviation of the distance of the weather station to the
coast.</p></li>
<li><p>We can also apply commands to non-numeric data. For example,
maybe we want to count the occurrences of some category in our dataset
e.g. how many stations are in each US State. To do this, we use the
table command: <code>table(frost$State)</code> Use this to work out how
many weather stations there are in Alabama in our data?</p></li>
<li><p>R includes some fantastic summary commands that we can use on the
whole dataset. Run <code>summary(frost)</code> and explain what is going
on.</p></li>
<li><p>We can also look at how many rows and columns of data there are.
There are LOADS of ways of doing this. Have a look at the
<code>dim</code> command, or the <code>nrow</code> command or others, to
show me how many weather stations there are.</p></li>
<li><p><em>Press knit, check there are no issues with the
code</em></p></li>
</ol>
<p><br><br></p>
</div>
<div id="plots-and-maps" class="section level2">
<h2>9: Plots and maps</h2>
<div id="a-histograms" class="section level3">
<h3>a) Histograms</h3>
<p>It’s also very easy to make professional plots and maps in R. This
used to be much harder and there are <em>many</em> packages you could
use. Today we are going to focus on the ggplot2 package.</p>
<p>First use this code to make a basic histogram of the
Avg_DOY_SpringFrost column. To understand what is going on, see this
great tutorial: <a
href="https://365datascience.com/tutorials/r-tutorials/ggplot2-histogram/"
class="uri">https://365datascience.com/tutorials/r-tutorials/ggplot2-histogram/</a></p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">ggplot</span>(frost, <span class="fu">aes</span>(<span class="at">x=</span>Avg_DOY_SpringFrost)) <span class="sc">+</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>      <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">8</span>)</span></code></pre></div>
<p><br></p>
<p>To interpret the results, check out this wonderful tutorial - <a
href="https://flowingdata.com/2014/02/27/how-to-read-histograms-and-use-them-in-r/"
class="uri">https://flowingdata.com/2014/02/27/how-to-read-histograms-and-use-them-in-r/</a></p>
<p>We can improve our graph very easily. Try running this code.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">ggplot</span>(frost, <span class="fu">aes</span>(<span class="at">x=</span>Avg_DOY_SpringFrost)) <span class="sc">+</span> </span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>       <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">8</span>,</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>                  <span class="at">fill=</span><span class="st">&quot;#108A99&quot;</span>,</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>                  <span class="at">color=</span><span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a>       <span class="fu">xlab</span>(<span class="st">&quot;Average day of year of the last spring frost&quot;</span>) <span class="sc">+</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a>       <span class="fu">ylab</span>(<span class="st">&quot;Number of weather stations&quot;</span>) </span></code></pre></div>
<p>For a WHOLE LOAD of other formatting options, see here: <a
href="http://www.sthda.com/english/wiki/ggplot2-histogram-plot-quick-start-guide-r-software-and-data-visualization"
class="uri">http://www.sthda.com/english/wiki/ggplot2-histogram-plot-quick-start-guide-r-software-and-data-visualization</a></p>
<p><br></p>
<ol style="list-style-type: decimal">
<li><strong>Now make your own histogram of the Latitude column of the
frost data.</strong> <br> <strong>Go wild, impress us with your
formatting!<br />
</strong></li>
<li><em>Press knit, check there are no issues with the code</em></li>
</ol>
<p><br><br></p>
</div>
<div id="b-quick-maps" class="section level3">
<h3>b) Quick maps</h3>
<p>Finally, we can use the tmap package to have a look at some
plots.</p>
<p>First, we loaded our data as a standard old Excel file. So we need to
teach R that it has spatial coordinates. To do this, run this command.
If it works, nothing should outwardly happen, but you should see in your
environment quadrant that a new variable called frost.spatial has turned
up.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># In future classes we will break down what this is doing </span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>frost.spatial <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(frost,</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a>                      <span class="at">coords =</span><span class="fu">c</span>(<span class="st">&#39;Longitude&#39;</span>, <span class="st">&#39;Latitude&#39;</span>),</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>                      <span class="at">crs =</span> <span class="dv">4326</span>)</span></code></pre></div>
<p>IMPORTANT. <br></p>
<ol style="list-style-type: decimal">
<li>IF YOU GET A WEIRD ERROR TRY RE-TYPING ALL THE QUOTE MARKS AROUND
LONGITUDE AND LATITUDE. The copy/paste sometimes messes up.<br />
<br></li>
<li>ALSO, if you knit twice you might get an error like this. Don’t
panic, see canvas announcements and talk to Harman.</li>
</ol>
<p><img src="Figures/Lab2_Fig5_TmapCacheError.png" width="810" /></p>
<p><br></p>
<p>Now we can use the QTM (Quick Thematic Map function) to have a look!
Try this code. It should make an interactive map by default and you can
turn on different basemaps through clicking the layer symbol on the
map.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># This sets the mode to an interactive map. </span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="co"># If your computer struggles, try changing &#39;view&#39; to &#39;plot&#39;</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&#39;view&#39;</span>)</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="fu">qtm</span>(frost.spatial,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>    <span class="at">dots.col=</span><span class="st">&#39;Elevation&#39;</span>)</span></code></pre></div>
<p><img src="Figures/Lab2Fig4_MapOutput.png" width="643" /></p>
<p><br></p>
<ol style="list-style-type: decimal">
<li><strong>Now make your own map of the Avg_DOY_SpringFrost column in
the frost.spatial dataset. You can see a load more style options here <a
href="https://www.rdocumentation.org/packages/tmap/versions/3.3-3/topics/qtm"
class="uri">https://www.rdocumentation.org/packages/tmap/versions/3.3-3/topics/qtm</a><br />
</strong></li>
<li><em>Press knit, check there are no issues with the code</em></li>
</ol>
<p><br><br></p>
</div>
</div>
<div id="summarize-what-you-found" class="section level2">
<h2>10. Summarize what you found</h2>
<p>Finally, write a paragraph summarizing</p>
<ul>
<li><p>What the study was trying to achieve</p></li>
<li><p>Details of the dataset (how many weather stations, summary
statistics etc etc)</p></li>
<li><p>What spatial patterns do you see in the average last spring frost
dates in the dataset?</p></li>
<li><p>From looking at your maps/histograms etc, what factors or
processes do you think influence those patterns?</p></li>
</ul>
<p>In the future &amp; in the UFO section, we will integrate this
writing around your analysis, but for this week, I wanted you to focus
on really understanding the code.</p>
<p><br><br><br></p>
</div>
</div>
<div id="ufo-analysis" class="section level1">
<h1>UFO Analysis</h1>
<p>Congrats! If you have reached this far, you have at least received a
C for the bare minimum and a B+ for doing it all well. :)</p>
<p>We went through the frost example slowly and in detail. In the UFO
analysis, I want you to use what you learned on a new dataset. Remember
you can copy/paste/edit your code from above.<br><br></p>
<div id="reading-in-the-data" class="section level2">
<h2>11. Reading in the data</h2>
<p>You should have downloaded your unique UFO dataset from the Canvas
page into your Lab 2 folder. It should have your e-mail ID in the title.
Our first challenge is that it is not an excel file. Instead it’s a
‘gpkg’ file, a special type used for storing spatial data. For example,
mine is “hlg5155_UFO_Wales.gpkg”</p>
<p>In your UFO /Reading-In-Data section of your lab report, make a new
code chunk and use this code to load your dataset. For me, it would be
<code>ufo &lt;- st_read("hlg5155_UFO_Wales.gpkg")</code>.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># change to your personal file name.</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>ufo <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;YOUR_FILENAME&quot;</span>)</span></code></pre></div>
<p>NOTE: “.gpkg” is not needed at the end of your file name. Pay
attention to how your file name is displayed in your folder/Rstudio file
window.</p>
<p>When you run the code chunk, it will load the data from the file and
save it into your environment to a spreadsheet we have called ufo.</p>
<p><em>Press knit, check there are no issues with the code.</em></p>
<p>Click on the name ufo and have a look! I have given each of you data
of reported UFO sightings for either a single US State or a single
country.</p>
<ul>
<li><p>The object of analysis, .e.g each row, is a single UFO
sighting</p></li>
<li><p>Your columns are:</p>
<ul>
<li><p>Year - The year of the sighting</p></li>
<li><p>Month - The year of the sighting</p></li>
<li><p>Day - The year of the sighting</p></li>
<li><p>Hour - The hour of the sighting (24hr clock e.g. 23=11pm,
00=midnight)</p></li>
<li><p>Sighting_Type - what type of UFO was seen?</p></li>
<li><p>Sighting_Duration - how long was the sighting IN SECONDS</p></li>
<li><p>Region - your region/country/state</p></li>
<li><p>geom / geometry - a special internal R column containing the
spatial location of the sighting.</p></li>
</ul></li>
</ul>
<!-- -->
<ul>
<li>Your dataset came from here: <a
href="https://github.com/planetsig/ufo-reports"
class="uri">https://github.com/planetsig/ufo-reports</a> and I split it
into separate states and countries. The raw data was collected here: <a
href="https://nuforc.org/" class="uri">https://nuforc.org/</a></li>
</ul>
</div>
<div id="your-own-analysis" class="section level2">
<h2>12. Your own analysis</h2>
<p>Write a summary of this dataset in the UFO section of your RMarkdown
document, using the code you have learned above (or any other
code/resources). For example, your write up could include: <br></p>
<ol style="list-style-type: decimal">
<li><p>A summary of where the data came from/how it was collected - and
your guesses about any spatial patterns. <br></p></li>
<li><p>What country are you focused on, how many sightings are there in
your database, when did they start/end etc. <br></p></li>
<li><p>The average duration, and a histogram of Sighting_Duration</p>
<ul>
<li><p>A-grade Bonus -try making a boxplot of Sighting_Duration (google
R boxplot)</p></li>
<li><p>A** Bonus - try making a boxplot of duration for each month
e.g. <a href="https://r-graph-gallery.com/boxplot.html"
class="uri">https://r-graph-gallery.com/boxplot.html</a> e.g. is the
duration less in the winter?<br />
(<em>We do not provide support on A** options!)</em> <br></p></li>
</ul></li>
<li><p>A frequency table of the different UFO Sighting_Type:</p>
<ul>
<li><p>A-grade Bonus - try a “two way” table crossing the type with hour
e.g. <a href="https://www.statology.org/two-way-table-in-r/"
class="uri">https://www.statology.org/two-way-table-in-r/</a></p></li>
<li><p>A** Bonus - try making a tree map of the different ufo types - <a
href="https://r-graph-gallery.com/treemap.html"
class="uri">https://r-graph-gallery.com/treemap.html</a> (<em>We do not
provide support on A** options!</em>)<br></p></li>
</ul></li>
<li><p>A map of some aspect of your sightings and a paragraph explaining
BOTH any patterns you see AND any underlying processes that might cause
your dataset to have that pattern. <br></p></li>
<li><p>Optional - Anything else you want! Show off!</p></li>
</ol>
<p><br><br><br></p>
</div>
</div>
<div id="submitting-your-lab" class="section level1">
<h1>Submitting your Lab</h1>
<p>Remember to save your work throughout and to spell check! (next to
the save button). Now, press the knit button one final time.</p>
<p>On R-Desktop</p>
<ul>
<li><p>If you have not made any mistakes in the code then R should
create a html file in your lab 2 folder which includes your
answers.</p></li>
<li><p>If you look at your lab 2 folder on your computer, you should see
this there - complete with a very recent time-stamp. Double click on the
html file. This will open it in your web-browser.<br />
CHECK THAT THIS IS WHAT YOU WANT TO SUBMIT.<br></p></li>
</ul>
<p>On Rstudio cloud,</p>
<ul>
<li>See <a
href="https://psu-spatial.github.io/Geog364-2023/in_Tutorial03LabSetUp.html#Projects_using_Rstudioposit_Cloud">TUTORIAL
3 Cloud - LINK FIXED</a> for how to download your files <br></li>
</ul>
<p>Finally, go to Canvas and submit BOTH your html and your .Rmd file in
Lab 2.</p>
<p><img src="Figures/LabFig_WhatToSubmit.png" width="1673" /></p>
<p><br><br></p>
<div id="how-am-i-graded" class="section level2">
<h2>How am I graded?</h2>
<p>Look on Canvas, there will be a SPECIFIC RUBRIC that we use to grade
your lab. It should allow you to predict your grade. We will also
include comments with our feedback in every lab.</p>
<p>Overall, here is what your lab should correspond to:</p>
<table class=" lightable-classic-2 table table-striped table-hover table-responsive" style="font-family: &quot;Arial Narrow&quot;, &quot;Source Sans Pro&quot;, sans-serif; margin-left: auto; margin-right: auto; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
POINTS
</th>
<th style="text-align:left;">
Approx grade
</th>
<th style="text-align:left;">
What it means
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
98-100
</td>
<td style="text-align:left;">
A*
</td>
<td style="text-align:left;">
Exceptional.  Above and beyond.  THIS IS HARD TO GET.
</td>
</tr>
<tr>
<td style="text-align:left;">
93-98
</td>
<td style="text-align:left;">
A
</td>
<td style="text-align:left;">
Everything asked for with high quality.   Class example
</td>
</tr>
<tr>
<td style="text-align:left;">
85-93
</td>
<td style="text-align:left;">
B+/A-
</td>
<td style="text-align:left;">
Solid work but the odd mistake or missing answer in either the code or
interpretation
</td>
</tr>
<tr>
<td style="text-align:left;">
70-85
</td>
<td style="text-align:left;">
B-/B
</td>
<td style="text-align:left;">
Starting to miss entire/questions sections, or multiple larger mistakes.
Still a solid attempt. 
</td>
</tr>
<tr>
<td style="text-align:left;">
60-70
</td>
<td style="text-align:left;">
C/C+
</td>
<td style="text-align:left;">
It’s clear you tried and learned something.  Just attending labs will
get you this much as we can help you get to this stage
</td>
</tr>
<tr>
<td style="text-align:left;">
40-60
</td>
<td style="text-align:left;">
D
</td>
<td style="text-align:left;">
You submit a single word AND have reached out to Dr G or Aish for help
before the deadline (make sure to comment you did this so we can check)
</td>
</tr>
<tr>
<td style="text-align:left;">
30-40
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
You submit a single word……. ANYTHING.. Think, that’s 30-40 marks towards
your total….
</td>
</tr>
<tr>
<td style="text-align:left;">
0+
</td>
<td style="text-align:left;">
F
</td>
<td style="text-align:left;">
Didn’t submit, or incredibly limited attempt. 
</td>
</tr>
</tbody>
</table>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
